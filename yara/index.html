<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ø¨ÙˆÙˆØ¹ Ø®ÙŠÙŠØ±</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Cairo:wght@400;600&display=swap');

        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #fffafa;
            font-family: 'Cairo', sans-serif;
            overflow: hidden;
        }

        /* Ø§Ù„Ø¨ØªÙ„Ø§Øª */
        .petal {
            position: absolute;
            top: -20px;
            pointer-events: none;
            z-index: 100;
            animation: fall linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        .audio-btn {
            position: fixed; top: 20px; left: 20px; z-index: 200;
            background: #fff; border: 1px solid #ffd1dc;
            padding: 8px 18px; border-radius: 30px; cursor: pointer;
            font-size: 14px; color: #d81b60; box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        /* Ø§Ù„Ø¸Ø±Ù */
        .envelope {
            position: relative;
            width: 320px;
            height: 220px;
            background: #f8d7da;
            border-radius: 12px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            cursor: pointer;
            z-index: 10;
            transition: 0.3s;
        }

        .flap {
            position: absolute;
            top: 0; left: 0; width: 0; height: 0;
            border-left: 160px solid transparent;
            border-right: 160px solid transparent;
            border-top: 120px solid #f1b2b8;
            transform-origin: top;
            transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 40;
        }

        .pocket {
            position: absolute;
            top: 0; left: 0; width: 0; height: 0;
            border-left: 160px solid #f8d7da;
            border-right: 160px solid #f8d7da;
            border-bottom: 110px solid #f4c2c2;
            border-top: 110px solid transparent;
            border-radius: 0 0 12px 12px;
            z-index: 30;
        }

        .rose-seal {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -10%);
            font-size: 65px;
            z-index: 50;
            transition: 0.5s ease-in-out;
            animation: heartBeat 2s infinite;
        }

        @keyframes heartBeat {
            0%, 100% { transform: translate(-50%, -10%) scale(1); }
            50% { transform: translate(-50%, -10%) scale(1.1); }
        }

        /* Ø§Ù„Ø±Ø³Ø§Ù„Ø© */
        .letter {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 92%;
            height: 85%;
            background: white;
            z-index: 5;
            padding: 30px 20px;
            box-sizing: border-box;
            text-align: center;
            border-radius: 8px;
            opacity: 0; /* Ù…Ø®ÙÙŠØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
            visibility: hidden;
            transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .letter h2 { font-family: 'Amiri', serif; color: #ad1457; margin: 0 0 15px 0; font-size: 1.8rem; }
        .letter p { color: #444; font-size: 1.05rem; line-height: 1.8; margin: 0; }

        /* Ø­Ø±ÙƒØ© Ø§Ù„ÙØªØ­ ÙˆØ§Ù„Ø¥ØºÙ„Ø§Ù‚ */
        .open .flap {
            transform: rotateX(180deg);
            z-index: 0;
        }

        .open .letter {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -140%);
            z-index: 60;
        }

        .open .rose-seal {
            opacity: 0;
            visibility: hidden;
            transform: translate(-50%, -120%) scale(0);
        }

        .hint {
            position: absolute; bottom: -60px; width: 100%;
            text-align: center; color: #d81b60; font-weight: 600; font-size: 15px;
        }
    </style>
</head>
<body>

    <audio id="music" loop>
        <source src="maaak.mp3" type="audio/mpeg">
    </audio>

    <button class="audio-btn" onclick="toggleMusic(event)">ğŸµ</button>

    <div class="envelope" id="env" onclick="toggleEnvelope()">
        <div class="rose-seal">ğŸŒ¸</div>
        <div class="flap"></div>
        <div class="pocket"></div>
        <div class="letter" id="letter">
            <h2>ÙŠØ§Ø±ØªÙŠ ÙˆØ­Ø¨ÙŠØ¨ØªÙŠ </h2>
            <p>
                Ù„Ù… ÙŠÙƒÙ† ÙˆØ¬ÙˆØ¯Ùƒ ÙÙŠ Ø­ÙŠØ§ØªÙŠ Ø´ÙŠØ¦Ø§ Ø§Ø¹ØªØ¯ØªÙ‡<br>
                 Ø´Ø¹Ø±Øª Ù…Ù† Ø®Ù„Ø§Ù„Ùƒ Ø¨Ø§Ù„Ø¯ÙØ¦ ÙˆØ§Ù„Ø£Ù„ÙØ©<br> 
                ÙˆØªØ¬Ø³Ø¯ ÙÙŠÙŠ Ø±ÙˆØ­Ø§Ù† Ø§Ø­Ù…Ù„Ù‡Ø§ Ø¨ØµØ¯Ø±ÙŠ  <br>
                Ø±ÙˆØ­Ø§Ù‹ Ù„ÙŠ ÙˆØ±Ø­Ø§Ù‹ Ù„ÙƒÙ
            </p>
            <div style="font-size: 25px; margin-top: 15px;">âœ¨</div>
        </div>
        <div class="hint" id="hintText">  Ø§Ø¶ØºØ·ÙŠ Ø§Ù„ÙˆØ±Ø¯Ù‡ ÙŠØ§ ÙˆØ±Ø¯Ù‡</div>
    </div>

    <script>
        let petalInterval;

        function toggleEnvelope() {
            const env = document.getElementById('env');
            const music = document.getElementById('music');
            const hint = document.getElementById('hintText');

            if (!env.classList.contains('open')) {
                // Ø­Ø§Ù„Ø© Ø§Ù„ÙØªØ­
                env.classList.add('open');
                music.play();
                hint.innerText = " ";
                startPetals();
            } else {
                // Ø­Ø§Ù„Ø© Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
                env.classList.remove('open');
                hint.innerText = "Ø§Ø¶ØºØ·ÙŠ Ø§Ù„ÙˆØ±Ø¯Ù‡ ÙŠØ§ ÙˆØ±Ø¯Ø©";
                stopPetals();
            }
        }

        function toggleMusic(e) {
            e.stopPropagation();
            const m = document.getElementById('music');
            if (m.paused) m.play(); else m.pause();
        }

        function startPetals() {
            if (petalInterval) return;
            petalInterval = setInterval(() => {
                const p = document.createElement('div');
                p.classList.add('petal');
                p.innerHTML = 'ğŸŒ¸';
                p.style.left = Math.random() * 100 + 'vw';
                p.style.fontSize = Math.random() * 20 + 15 + 'px';
                p.style.animationDuration = Math.random() * 3 + 4 + 's';
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 6000);
            }, 350);
        }

        function stopPetals() {
            clearInterval(petalInterval);
            petalInterval = null;
        }
    </script>
</body>
</html>
